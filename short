<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Url Shortner</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    input, button { margin: 5px 0; padding: 8px; width: 100%; }
  </style>
</head>
<body>
  <h2>Create Short Link</h2>
  <input type="text" id="urlInput" placeholder="Enter original URL" />
  <input type="password" id="passwordInput" placeholder="Set a password" />
  <button onclick="createLink()">Create</button>
  <p id="output"></p>

  <script>
    function createLink() {
      const url = document.getElementById('urlInput').value;
      const password = document.getElementById('passwordInput').value;

      if (!url || !password) {
        alert("Please enter URL and password.");
        return;
      }

      const shortCode = Math.random().toString(36).substr(2, 5);
      localStorage.setItem("short_" + shortCode, JSON.stringify({ url, password }));

      const shortLink = location.href.split("?")[0] + "?id=" + shortCode;
      document.getElementById('output').innerHTML = `Your short link: <a href="${shortLink}">${shortLink}</a>`;
    }

    function checkLink() {
      const params = new URLSearchParams(window.location.search);
      const id = params.get("id");
      if (!id) return;

      const stored = localStorage.getItem("short_" + id);
      if (!stored) {
        document.body.innerHTML = "<h3>Link not found</h3>";
        return;
      }

      const data = JSON.parse(stored);
      const pass = prompt("Enter password to access the URL:");
      if (pass === data.password) {
        window.location.href = data.url;
      } else {
        alert("Wrong password!");
      }
    }

    window.onload = checkLink;
  </script>
</body>
</html>
